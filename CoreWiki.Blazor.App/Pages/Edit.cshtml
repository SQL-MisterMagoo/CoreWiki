@page "/Edit/{Slug}"
@using CoreWiki.Pages
@using Microsoft.AspNetCore.Blazor
@inject MediatR.IMediator mediator
@inject AutoMapper.IMapper Mapper
@inject IStringLocalizer<Edit> Localizer


<h2>@Localizer["EditArticle"]</h2>
<hr />
<br />
<div class="row">
	<div class="col-md-12">
		<form method="post">
			<input type="hidden" asp-for="Article.Id" />
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			<div class="form-group">
				<label asp-for="Article.Topic" class="control-label">@Model.Article?.Topic</label>
				<input asp-for="Article.Topic" class="form-control" value="@Model.Article.Topic" />
				<span asp-validation-for="Article.Topic" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="Article.Content" class="control-label">@Model.Article.Content</label>
				<textarea asp-for="Article.Content" class="form-control">@Model.Article.Content</textarea>
				<span asp-validation-for="Article.Content" class="text-danger"></span>
			</div>
			<div class="form-group">
				<div class="input-group mb-3">
					<div class="input-group-prepend">
						<span class="input-group-text">@Localizer["Upload"]</span>
					</div>
					<div class="custom-file">
						<input type="file" class="custom-file-input" id="inputGroupFile01" onchange="openFile(event)" />
						<label class="custom-file-label" for="inputGroupFile01">@Localizer["ChooseFile"]</label>
					</div>
				</div>
			</div>
			<div class="form-group">
				<button onclick=@Save class="btn btn-outline-primary">@Localizer["Save"]</button>
			</div>
		</form>
	</div>
</div>

<div>
	<a asp-page="./Details">@Localizer["GoHome"]</a>
</div>

@functions {
EditModel Model;

[Parameter]
string Slug { get; set; }

protected override async Task OnInitAsync()
{
	Model = new EditModel(mediator, Mapper);
	var result = await Model.OnGetAsync(Slug);
}

void Save()
{
	Model.OnPostAsync();
}
}

@*@section Scripts {
	@await Html.PartialAsync("_EditorScript")

	}

	@section Styles {

	@await Html.PartialAsync("_EditorStyle")*@

}
